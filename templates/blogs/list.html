{% extends "base.html" %}
{% block title %}Blog Posts{% endblock %}

{% block content %}
	<link rel="stylesheet" href="{{STATIC_URL}}css/blog.css" />
	<div id="content" >
	<div class="wrapper">

		<!-- Posts  -->
		<ul>
			<article>
				{% for post in posts.object_list %}
					<section>
					<div id="post_content">
							<header>
								<h3><a href="{% url 'blogs.views.post' post.pk %}">{{ post.title }}</a></h3>
							</header>
							
							{% autoescape off %}  
								<div id="post_body">	{{ post.body|linebreaks|truncatewords:100}}</div> 
							{% endautoescape %}
							
							<footer>
								<div id="post_footer">
										<p>Posted By &nbsp; <a href="mailto:{{post.email}}">{{post.name}} </a> &nbsp;on &nbsp;{{post.created}}.</p>
										<p><span id="readmore_link"><a class="readmore" href="{% url 'blogs.views.post' post.pk  %}"><b>read more...</b></a></span>
										<span id="readmore_link"><a class="readmore" href="{% url 'blogs.views.list_user' post.user_id  %}"><b>{{post.name}}'s blog</b></a></span>
										<span id="comments_link"><a href="{% url 'blogs.views.post' post.pk %}">Comments</a></span></p>
										
								</div>
							</footer>
					</div>
					</section>
				{% endfor %}
			</article>	
		</ul>

		<!-- Next/Prev page links  -->
		{% if posts.object_list and posts.paginator.num_pages > 1 %}
		<div  style="margin-top: 20px; margin-left: -20px; ">
			<span >
				{% if posts.has_previous %}
					<a href= "?page={{ posts.previous_page_number }}">newer entries &lt;&lt; </a>
				{% endif %}

				<span >
					&nbsp;Page {{ posts.number }} of {{ posts.paginator.num_pages }}
				</span>

				{% if posts.has_next %}
					<a href="?page={{ posts.next_page_number }}"> &gt;&gt; older entries</a>
				{% endif %}
			</span>
		</div>
		{% endif %}
</div>
	</div>

{% endblock %}
